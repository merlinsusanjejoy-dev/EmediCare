{% extends 'Administrator/Header.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Booking Report</title>
    <style>
        /* Table Styling */
        table {
            width: 50%;
            border-collapse: collapse;
            margin: 20px auto;
            text-align: center;
            font-family: Arial, sans-serif;
        }

        th, td {
            border: 1px solid #000;
            padding: 10px;
        }

        /* Header Styling - Same as Sidebar Color */
        th {
            background-color: #100a32; /* Change this to match the sidebar color */
            color: white;
        }

        td a {
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
        }

       

        /* Center Form */
        form {
            text-align: center;
        }

        h3 {
            text-align: center;
            color: #333;
        }
    </style>
</head>
<body>
    <h2 align="center">Datewise Report</h2>
    <form action="" method="post">
        {% csrf_token %}
        <table style="width: auto;">
            <tr>
                <td><label for="txt_fromdate">From Date</label></td>
                <td><input type="date" name="txt_fromdate" id="txt_fromdate" value="{{ from_date }}"></td>
            </tr>
            <tr>
                <td><label for="txt_todate">To Date</label></td>
                <td><input type="date" name="txt_todate" id="txt_todate" value="{{ to_date }}"></td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="submit" value="Generate Report">
                </td>
            </tr>
        </table>
    </form>

    {% if data %}
        {% for pharmacy_data in data %}
            <h3>Shop: {{ pharmacy_data.pharmacy }}</h3>
            <table>
                <tr>
                    <th>S.No</th>
                    <th>Date</th>
                    <th>Amount ($)</th>
                    <th>User Name</th>
                    <th>medicine Name</th>
                    <th>Quantity</th>
                </tr>
                {% for medicine in pharmacy_data.medicines %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ medicine.date }}</td>
                        <td>${{ medicine.amount }}</td>
                        <td>{{ medicine.user.user_name }}</td>
                        <td>{{ medicine.medicine}}</td>
                        <td>{{ medicine.quantity }}</td>
                    </tr>
                {% endfor %}
                <tr class="total-row">
                    <td colspan="2">Total</td>
                    <td colspan="4">${{ pharmacy_data.pharmacy_total }}</td>
                </tr>
            </table>
        {% endfor %}
    {% else %}
        <p>No data available for the selected date range.</p>
    {% endif %}
</body>
</html>
{% endblock %}